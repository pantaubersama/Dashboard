<div class="d-flex main-wrapper">
  <%= render("components/sidebar") %>
  <div class="main-wrapper">
    <main class="main col-md-10 offset-md-2" role="main">
      <%= render "components/question/header", active: "terpilih" %>
      
      <div class="tab-content clearfix">
        <div class="main-content tab-pane active" id="terpilih">
          <div class="top ">
            <% link = pagy_link_proc(@pagy) %>
            <div class="pagination-wrap">
              <ul class="pagination">
                <% if @pagy.prev %>
                <li class="page-item">
                  <%== link.call(@pagy.prev, pagy_t('pagy.nav.prev')) %>
                </li>
                <% else  %>
                <li class="page-item disabled">
                  <%== link.call(@pagy.prev, pagy_t('pagy.nav.prev')) %>
                </li>
                <% end %>

                <% @pagy.series.each do |item| %>
                <% if item.is_a?(Integer) %>
                <li id="testtest" class="page-item">
                  <%== link.call(item) %>
                </li>
                <% elsif item.is_a?(String) %>
                <li class="page-item active" aria-current="page">
                  <%== link.call(item) %>
                </li>
                <% elsif item == :gap %>
                <li class="page-item disabled gap"><a href="#" class="page-link">
                    <%== pagy_t('pagy.nav.gap') %></a></li>
                <% end %>
                <% end %>

                <% if @pagy.next %>
                <li class="page-item">
                  <%== link.call(@pagy.next, pagy_t('pagy.nav.next')) %>
                </li>
                <% else %>
                <li class="page-item disabled">
                  <%== link.call(@pagy.next, pagy_t('pagy.nav.next')) %>
                </li>
                <% end %>
              </ul>
            </div>
          </div>
          <div class="content">
            <span class="display-desc">
              <p>
                <%= show_count_table(params[:page], @total_row_per_page, @total_folders) %>
              </p>
            </span>
            <div class="table">
              <table>
                <thead>
                  <tr>
                    <th>No</th>
                    <th>Nama</th>
                    <th>Jumlah Pertanyaan</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <% @folders.each_with_index do |folder, index| %>
                    <tr>
                      <td class="number bold">
                        <%= ((params[:page].present? ? params[:page].to_i : 1) - 1) * Pagy::VARS[:items] + index+1 %>
                      </td>
                      <td class="name bold icon">
                        <a href="#">
                          <img src="<%= asset_pack_path("views/assets/images/ic_folder.svg")%>">
                          <%= folder["name"] %>
                        </a>
                      </td>
                      <td><%= folder["questions_count"] %></td>
                      <td>
                        <button class="dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
                          aria-expanded="false">
                          <img src="<%= asset_pack_path("views/assets/images/ic_action.svg") %>">
                        </button>
                        <div class="dropdown-menu" aria-labelledby="action">
                          <a class="dropdown-item" href="#">Lihat</a>
                          <a class="dropdown-item" href="#">Edit</a>
                        </div>
                      </td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </div>
            <div class="filter">
              <a class="btn " data-toggle="collapse" href="#filter_folders" role="button" aria-expanded="false" aria-controls="collapseExample">
                <img src="<%= asset_pack_path("views/assets/images/ic_arrow-left.svg") %>">
                <img src="<%= asset_pack_path("views/assets/images/ic_filter.svg") %>">
              </a>
              <div id="filter_folders" class="collapse filter-form">
                <div class="card card-body">
                  <h4>Filter</h4>
                  <%= form_tag(folders_questions_path, method: :get) do %>
                  <div class="form-wrap">
                    <label>Nama</label>
                    <div class="form-group">
                      <div class="form-group">
                        <input type="nama" name="nama" value="<%= params[:nama].present? ? params[:nama] : nil%>"
                          class="form-control" placeholder="Nama">
                      </div>
                    </div>
                  </div>
                  <button type="submit">Done</button>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
<%= render("components/footer") %>